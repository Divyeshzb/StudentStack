# ********RoostGPT********
# Test generated by RoostGPT for test connector-api-spec using AI Type Open AI and AI Model gpt-4
# 
# Test generated for /v1/cards/{cardId}/cardPaymentAuthenticationStatuses_post for http method type POST in artillery framework
# RoostTestHash=511084a98f
# 
# 
# ********RoostGPT********
config:
  target: "{{ $processEnvironment.API_HOST }}"
  plugins:
    expect: {}
  payload:
    path: "cardPaymentAuthenticationStatuses_post_others.csv"
    fields:
      - "transactionId"
      - "cardId"
      - "trusteeExternalId"
      - "channelType"
      - "status"
      - "statusTimestamp"
      - "timestamp"
    skipHeader: true
  headers:
    Authorization: "{{$processEnvironment.AUTH_TOKEN}}"
    Accept-Language: "en"
    X-requestId: "{{ $uuid }}"

scenarios:
  - name: "Non-success API requests"
    flow:
      # Invalid request with missing required fields in payload
      - post:
          url: "/v1/cards/{{ cardId }}/cardPaymentAuthenticationStatuses"
          headers:
            Content-Type: "application/json"
          json:
            transactionId: "{{ transactionId }}"
            cardId: "{{ cardId }}"
            trusteeExternalId: "{{ trusteeExternalId }}"
            channelType: "{{ channelType }}"
            status: "{{ status }}"
          expect:
            - statusCode: 400
      - think: 1

      # Invalid request with incorrect authorization token
      - post:
          url: "/v1/cards/{{ cardId }}/cardPaymentAuthenticationStatuses"
          headers:
            Content-Type: "application/json"
            Authorization: "InvalidToken"
          json:
            transactionId: "{{ transactionId }}"
            cardId: "{{ cardId }}"
            trusteeExternalId: "{{ trusteeExternalId }}"
            channelType: "{{ channelType }}"
            status: "{{ status }}"
            statusTimestamp: "{{ statusTimestamp }}"
            timestamp: "{{ timestamp }}"
          expect:
            - statusCode: 401
      - think: 1

      # Request to non-existing endpoint
      - get:
          url: "/v1/non-existing-endpoint"
          expect:
            - statusCode: 404
      - think: 1

      # Request with invalid payload
      - post:
          url: "/v1/cards/{{ cardId }}/cardPaymentAuthenticationStatuses"
          headers:
            Content-Type: "application/json"
          json:
            transactionId: "{{ transactionId }}"
            cardId: "{{ cardId }}"
            trusteeExternalId: "{{ trusteeExternalId }}"
            channelType: "INVALID_CHANNEL_TYPE"
            status: "{{ status }}"
            statusTimestamp: "{{ statusTimestamp }}"
            timestamp: "{{ timestamp }}"
          expect:
            - statusCode: 400
      - think: 1
